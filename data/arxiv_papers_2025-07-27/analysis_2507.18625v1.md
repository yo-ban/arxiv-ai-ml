# 3D Software Synthesis Guided by Constraint-Expressive Intermediate Representation

## 基本情報
- **arXiv ID**: 2507.18625v1 (https://arxiv.org/abs/2507.18625)
- **著者**: Shuqing Li, Anson Y. Lam, Yun Peng, Wenxuan Wang, Michael R. Lyu 
- **所属**: The Chinese University of Hong Kong, Renmin University of China
- **投稿日**: 2025年07月26日
- **カテゴリ**: cs.AI, cs.PL

## 簡単に説明すると
この論文は、ゲームやVR/ARアプリケーションなどの3Dソフトウェアを自然言語から自動生成するシステム「Scenethesis」を提案しています。

現在、2DのWebページやアプリのUIコード生成は活発に研究されていますが、3Dソフトウェアの自動生成はまだ発展途上です。既存の手法は、「キッチンを作って」というような簡単な指示から、一気に完成した3D空間を生成しますが、細かい修正や複雑な制約条件の指定ができません。

Scenethesisの主な特徴は、「ScenethesisLang」という中間言語を使用することです。これにより、以下のようなことが可能になります：
- 「全ての非常装置は作業ステーションから2メートル以内に配置し、かつ1.5メートルの避難経路を確保する」といった複雑な制約条件の指定
- 生成後に特定のオブジェクトだけを修正
- 制約条件の检証と満足度の確認

システムは以下の4つの段階で動作します：
1. 自然言語の要求をScenethesisLangに変換
2. 必要な3Dモデルをデータベースから取得または生成
3. ルービックキューブの解法にインスパイアされたアルゴリズムで制約条件を満たす配置を計算
4. Unityで実行可能な3Dソフトウェアを生成

評価実験では、ユーザー要求の80%以上を正確に取り込み、100個以上の制約条件の90%以上を満たし、視覚的品質も既存手法より42.8%向上したことが示されました。

論文ではGitHubやHuggingFaceのリンクは提供されていませんが、ソフトウェア工学のトップカンファレンスICSE 2026への投稿論文です。

## 1. 研究概要
### 1.1 背景と動機
グラフィカルユーザーインターフェース（GUI）ソフトウェアは、1973年のXerox Altoの登場以来、コンピューティングの基盤となってきました。当初は2次元（2D）インターフェースとして登場し、ソフトウェア工学コミュニティは2D UI自動生成のための成熟したエコシステムと技術を開発してきました。

2000年代初頭からのグラフィックスハードウェアの進歩とUnityなどの3Dエンジンの登場により、3次元（3D）ソフトウェアは爆発的な成長を遂げました。世界の3Dソフトウェア市場は2024年に320億ドル以上に達し、ロボットシミュレータ、自動運転車両やドローンの訓練プラットフォーム、3Dゲーム、バーチャルプロダクションシステム、モデリング・デザインアプリケーション、デジタルツインプラットフォーム、拡張現実（VR/AR）アプリケーションなど、多様な領域に広がっています。

しかし、この急速な成長にもかかわらず、3Dソフトウェアの自動合成は依然として未開拓の分野です。確立された2D UI生成手法は、空間的複雑性、物理的制約、インタラクションパラダイムの根本的な違いのため、3Dソフトウェア合成に直接適用することができません。

最近のエンドツーエンドのテキスト-3D生成アプローチは、ニューラル合成、手続き的モデリング、制約ベース手法に基づいて、自然言語から完全な3Dソフトウェアを直接生成します。これらは通常、3Dソフトウェア生成を構造化されたソフトウェア合成タスクではなく、モノリシックなビジョン問題として扱います。

しかし、高品質な3Dソフトウェアは視覚的に魅力的であるだけでなく、機能的に正しく、物理的にもっともらしく、プログラム的にテスト可能である必要があります。これらのアプローチには、高レベルの要求と低レベルの3Dソフトウェア実装の間の意味的ギャップを埋めるきめ細かい中間表現（IR）が欠けています。

### 1.2 主要な貢献
本研究は、3Dソフトウェア合成にソフトウェア工学の原則を導入し、以下の4つの主要な貢献を行っています：
- 空間制約仕様とシーン記述を統一した3Dシーン用の形式的DSL（ScenethesisLang）を提案し、表現力と検証可能性を両立
- 3Dシーン生成を要求形式化、アセット合成、空間制約解決、ソフトウェア合成の4段階に分解し、各段階が独立して検証可能でモジュラーな合成パイプラインを設計
- ローカルからグローバルへの洗練を通じて従来のアプローチの指数関数的複雑性を回避し、複雑な3Dソフトウェアに対する実用的なスケーラビリティを達成する新しい反復制約解決アルゴリズム（Rubik Spatial Constraint Solver）の開発
- 既存のベースラインと比較してScenethesisの優位性を示す包括的な評価

## 2. 提案手法
### 2.1 手法の概要
Scenethesisは、自然言語の要求から実行可能な3Dソフトウェアを生成するフレームワークで、4つの明確に定義されたステージで構成されています。

**全体的なアーキテクチャ：**
1. **要求形式化（Stage I）**: 自然言語をScenethesisLang仕様に変換
2. **アセット合成（Stage II）**: 必要な3Dモデルの取得・生成
3. **空間制約解決（Stage III）**: 制約を満たす配置の計算
4. **ソフトウェア合成（Stage IV）**: Unity互換の3Dソフトウェア生成

この分解により、各ステージを独立して検証・改善でき、従来のエンドツーエンド生成手法では不可能だった制御性と検証可能性を実現しています。

**ScenethesisLang（DSL）の役割：**
ScenethesisLangは、空間制約仕様言語と3Dシーン記述言語の両方として機能します。この言語により、以下が可能になります：
- オブジェクトとリージョンの宣言
- 複雑な空間制約の表現（相対位置、距離、包含関係など）
- 物理法則の明示的な記述（重力、衝突回避など）
- 生成後の部分的な修正とトレーサビリティ

### 2.2 技術的詳細
**Stage I: 要求形式化の詳細**

自然言語処理と文脈理解：
- 大規模言語モデル（LLM）を使用してシーンタイプ（屋内/屋外）を分類
- 制御されたプロンプト拡張により、暗黙の制約を推論
- 例：「モダンな会議室」から家具配置、照明条件、アクセシビリティの要件を推論

DSL仕様生成プロセス：
1. エンティティ抽出：NL記述からオブジェクトを特定し、宣言文を生成
2. 空間制約生成：空間関係をScenethesisLangの制約文に変換
   - 例：「ランプがテーブルの上に吊り下げられている」→ `assert lamp.pos.y > table.pos.y + table.scale.y`
3. 隠れた制約の補完：物理的リアリズムのための制約を追加
   - 衝突回避：`∀oi, oj ∈ O, i ≠ j ⇒ ¬collides(oi, oj) ∨ allowCollide(oi, oj)`
   - 重力制約：適切な支持関係を保証
   - 境界制約：オブジェクトを指定領域内に保持

**Stage II: アセット合成の詳細**

ハイブリッド合成戦略：
- 検索ベース取得：
  ```
  o* = argmax_{o ∈ D} score_ret(o, q_o)
  where score_ret(o, q_o) = (λv・sim_visual(o, q_o) + λt・sim_semantic(o, q_o)) / (λv + λt)
  ```
- 生成ベース取得：スコアが閾値τ未満の場合、テキスト-3D生成を実行
- Vision Language Model（VLM）による向きの検証と修正

**Stage III: 空間制約解決の詳細**

Rubik Spatial Constraint Solver：
```
Algorithm: Rubik Spatial Constraint Solver
1. L0 ← InitialPlacement(O)
2. L0 ← PhysicsRelaxation(L0)
3. For t = 1 to T:
   4. U ← {c ∈ C : ¬Satisfied(c, Lt-1)}
   5. If |U| = 0: Return Lt-1
   6. B ← SelectBatch(U, k)
   7. Lt ← LLMSolve(Lt-1, B, C)
   8. Lt ← EnforceBounds(Lt)
9. Return BestSolution(L0, L1, ..., LT)
```

このアルゴリズムは、ルービックキューブの解法にインスパイアされた反復的アプローチを採用し、局所的な調整が全体的な制約満足につながるように設計されています。

### 2.3 新規性
本研究の新規性は以下の点にあります：

**1. ソフトウェア工学原則の3D合成への適用**
従来の手法が3D生成を視覚的問題として扱うのに対し、本研究は構造化されたソフトウェア合成タスクとして定式化しました。これにより、モジュラリティ、検査可能性、正確性、制御可能性というソフトウェア工学の原則を実現しています。

**2. 表現力豊かな中間表現（ScenethesisLang）**
既存のシーングラフベースの手法は、左/右/上/下といった離散的な関係しか表現できませんでしたが、ScenethesisLangは：
- 連続値を用いた任意の空間制約の表現
- 複数の同時関係の記述
- 複雑な論理合成の支援
- 宣言的な仕様と手続き的な実装の橋渡し

**3. 段階的な分解による検証可能性**
エンドツーエンドのブラックボックスアプローチとは異なり、各ステージが独立して検証可能で、開発者は任意の段階で介入して洗練や方向転換が可能です。

**4. スケーラブルな制約解決アルゴリズム**
従来の制約解決手法の指数関数的複雑性を回避し、局所から全体への洗練を通じて実用的なスケーラビリティを達成しました。100個以上の制約を同時に処理できる能力は、実世界のアプリケーションにとって重要です。

## 3. 実験結果
### 3.1 実験設定
**データセット：**
- 50個の包括的なユーザークエリからなるデータセットを構築
- 平均クエリ長：508.4語（A4用紙1ページ相当）
- 多様な部屋タイプ（会議室、寝室、キッチン、オフィスなど）をカバー
- 各クエリは詳細な要求仕様、空間制約、美的要求を含む

**評価指標：**
1. **要求形式化の精度**：オブジェクト制約とレイアウト制約の適合率・再現率・F1スコア
2. **制約満足度**：満たされた制約の割合
3. **視覚的品質**：
   - BLIP-2スコア：画像-テキストの整合性
   - CLIPスコア：意味的類似性
   - VQAスコア：視覚的質問応答による評価
4. **ユーザー評価**：レイアウトの一貫性、空間的リアリズム、全体的な整合性

**比較手法：**
- エンドツーエンドLLM：直接3Dシーンを生成
- Holodeck：シーングラフベースの最先端手法
- 各手法に3つのLLMバックエンド（GPT-4o、Gemini 2.5 Pro、DeepSeek R1）を使用

### 3.2 主要な結果
**ステージ別の性能分析：**

Stage I（要求形式化）の結果：
- オブジェクト制約：全モデルで高精度（F1 > 0.94、τo = 0.9の厳格な閾値でも）
- レイアウト制約：閾値が上がると性能が大幅に低下（τl = 0.7でF1 > 0.86、τl = 0.9でF1 < 0.13）
- DeepSeek R1が最もバランスの取れた性能（標準閾値でF1 = 0.967）

Stage II（アセット合成）の結果：
- ハイブリッドアプローチ（検索+生成）が最良の性能（平均コヒーレンススコア39.3）
- 純粋な検索：BLIP-2スコア51.2（高品質だが約23%のクエリで適切なモデルが見つからない）
- 純粋な生成：BLIP-2スコア42.2（カバレッジは完全だが品質が劣る）
- 最適閾値τ = 0.652で品質とカバレッジのバランスを実現

Stage III（空間制約解決）の結果：
- Gemini 2.5 Proが最高の制約満足率93.8%を達成
- 初期配置から最終解への大幅な改善（例：Gemini 2.5 Proは74.1%→93.8%）
- 5回の反復内で収束し、初期反復で急速な改善を示す

**全体的な性能：**
ScenethesisはすべてのベースラインをBLIP-2スコアで上回り：
- Gemini 2.5 Proバックエンド：74.3%（オリジナルクエリ）、75.1%（センテンスレベル）
- 最良のベースライン（エンドツーエンドLLM）と比較して平均4.8%の改善
- VQAメトリクスでは特に大きな改善：DeepSeek R1で48.6%（ベースラインより18.3%向上）

### 3.3 既存手法との比較
**定量的比較：**

視覚的一貫性（BLIP-2スコア）：
- Scenethesis（Gemini 2.5 Pro）：74.3%
- エンドツーエンドLLM（Gemini 2.5 Pro）：71.6%
- Holodeck（Gemini 2.5 Pro）：67.0%

意味的理解（VQAスコア、センテンスレベル）：
- Scenethesis（DeepSeek R1）：48.6%
- エンドツーエンドLLM（Gemini 2.5 Pro）：41.1%
- Holodeck（Gemini 2.5 Pro）：42.1%

**ユーザー評価結果：**
- レイアウトの一貫性：Scenethesis 4.12、Holodeck 3.68（19.4%改善）
- 空間的リアリズム：Scenethesis 3.89、Holodeck 3.42（13.7%改善）
- 全体的整合性：Scenethesis 4.05、Holodeck 3.61（12.2%改善）

**主要な洞察：**
1. 構造化されたアプローチにより、特に複雑な制約を持つシーンで優れた性能を発揮
2. LLMバックエンドの選択が重要で、DeepSeek R1がScenethesisと最も相性が良い
3. オリジナルクエリとセンテンスレベルクエリの間で安定した性能（差は通常3%未満）
4. モジュラーアーキテクチャにより、各ステージでの最適化が可能で、全体的な品質向上に貢献

## 4. 実用性評価
### 4.1 実装の容易性
**モジュラー設計の利点：**
Scenethesisの4段階アーキテクチャは、実装と保守の観点から優れた特性を持ちます。各ステージが明確に定義されたインターフェースを持つため、開発者は特定のステージのみを改善したり、異なる実装に置き換えることが可能です。

**ScenethesisLangの学習曲線：**
DSLは比較的シンプルな構文を持ち、宣言的なスタイルを採用しているため、SQL や他の宣言型言語に慣れた開発者であれば短期間で習得可能です。また、自然言語からの自動変換により、直接DSLを書く必要性は限定的です。

**既存ツールとの統合：**
- Unity互換の出力により、既存のゲーム開発ワークフローに容易に統合可能
- 標準的な3Dフォーマット（FBX/OBJ）のサポート
- メタデータの埋め込みによるラウンドトリップエンジニアリングの実現

**実装上の課題：**
- LLMの選択と設定の最適化が必要
- 3Dモデルデータベースの構築と維持
- 制約解決の収束を保証するパラメータチューニング

### 4.2 計算効率
**各ステージの計算コスト：**

Stage I（要求形式化）：
- LLM呼び出しによる遅延（通常数秒）
- プロンプト拡張と冗長性除去による追加の処理時間

Stage II（アセット合成）：
- 検索：高速（データベースサイズに依存、通常ミリ秒オーダー）
- 生成：遅い（テキスト-3Dモデル生成は数分かかる場合がある）
- ハイブリッドアプローチにより、多くの場合は高速な検索で対応可能

Stage III（空間制約解決）：
- 反復回数に比例（通常5回以内で収束）
- 各反復でのLLM呼び出しがボトルネック
- バッチサイズkの調整により並列性と収束速度のトレードオフを制御

Stage IV（ソフトウェア合成）：
- メッシュ処理と統合：比較的高速
- Unity プロジェクト生成：自動化されており効率的

**スケーラビリティ：**
- オブジェクト数に対して線形にスケール（従来の二次的な複雑性を回避）
- 100個以上の制約を同時に処理可能
- 並列処理の活用により、複数のシーン生成を同時実行可能

### 4.3 応用可能性
**直接的な応用分野：**

1. **ゲーム開発**：
   - レベルデザインの自動化
   - プロトタイピングの高速化
   - プロシージャル生成との組み合わせ

2. **建築・インテリアデザイン**：
   - 初期設計案の生成
   - 制約条件（建築基準、アクセシビリティ）の自動考慮
   - クライアント要求の迅速な可視化

3. **VR/ARアプリケーション**：
   - 動的なシーン生成
   - ユーザー要求に基づくカスタマイズ
   - 教育・トレーニング環境の構築

4. **ロボティクス・シミュレーション**：
   - テスト環境の自動生成
   - 多様なシナリオの作成
   - 安全性検証のための環境構築

**拡張可能性：**
- 屋外環境への対応（現在は屋内環境に特化）
- より複雑な物理シミュレーションの統合
- リアルタイムでの動的な制約変更への対応
- マルチユーザー協調編集機能の追加

## 5. まとめと所感
### 5.1 論文の意義
本研究は、3Dソフトウェア合成にソフトウェア工学の原則を適用した先駆的な取り組みです。

**学術的貢献：**
従来の視覚的生成問題として扱われていた3Dシーン生成を、構造化されたソフトウェア合成問題として再定義しました。これにより、検証可能性、保守性、拡張性といったソフトウェア工学の重要な特性を3D生成タスクに導入することに成功しています。

**実用的インパクト：**
80%以上の要求取り込み精度と90%以上の制約満足率は、実用レベルでの展開可能性を示しています。特に、BLIP-2評価スコアで既存手法を42.8%上回る結果は、生成品質の大幅な向上を実証しています。

**技術的洞察：**
中間表現（ScenethesisLang）の導入が成功の鍵となっています。これにより、要求と実装の間の意味的ギャップを埋め、段階的な検証と改善を可能にしました。また、Rubik Spatial Constraint Solverによる反復的アプローチは、複雑な制約問題を実用的な時間で解決する新しい道を示しています。

**限界と課題：**
- 現在は屋内環境に限定されている
- 制約解決の収束が保証されない場合がある
- 高品質な3Dモデルデータベースへの依存

### 5.2 今後の展望
**短期的な改善点：**
- 屋外環境への拡張
- より高度な物理シミュレーションの統合
- 制約解決アルゴリズムの最適化
- マルチモーダル入力（スケッチ、参照画像）のサポート

**長期的な研究方向：**

1. **自己改善システムの構築**：
生成結果のフィードバックを学習し、システムが自動的に改善される仕組みの開発。

2. **協調的な3D環境設計**：
複数のユーザーが同時に要求を入力し、統合された環境を生成するシステム。

3. **動的な環境適応**：
使用パターンやユーザーフィードバックに基づいて、生成された環境が自動的に進化する機能。

4. **産業標準への統合**：
建築CADシステムやBIMツールとの統合により、実務での活用を促進。

**社会的影響：**
本技術の発展により、3Dコンテンツ作成の民主化が進み、専門知識を持たないユーザーでも高品質な3D環境を作成できるようになることが期待されます。これは、教育、エンターテインメント、建築、製造業など、幅広い分野でのイノベーションを促進する可能性があります。
